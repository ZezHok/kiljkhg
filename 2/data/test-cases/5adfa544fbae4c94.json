{"uid":"5adfa544fbae4c94","name":"test_upload_pet_image_sizes_statuses[img_size3-400]","fullName":"main#test_upload_pet_image_sizes_statuses","historyId":"e7fcdece59283e078e4486808b110aea","time":{"start":1724667958086,"stop":1724667958257,"duration":171},"status":"failed","statusMessage":"AssertionError: assert 200 == 400\n +  where 200 = <Response [200]>.status_code","statusTrace":"base_url = 'https://petstore.swagger.io/v2', pet_id = 123454321\nimg_size = (0, 0), expected_status = 400\n\n    @pytest.mark.parametrize(\"img_size, expected_status\", [\n        ((256, 512), 200),\n        ((512, 1024), 200),\n        ((1, 1), 200),\n        ((0, 0), 400)\n    ])\n    def test_upload_pet_image_sizes_statuses(base_url, pet_id, img_size, expected_status):\n        def upload_image(file, metadata):\n            return requests.post(\n                f'{base_url}/pet/{pet_id}/uploadImage',\n                data={'additionalMetadata': metadata},\n                files={'file': file}\n            )\n    \n        if img_size == (0, 0):\n            response = upload_image(('empty.png', b'', 'image/png'), 'Testing with (0, 0) image')\n            print('\\nAttempted upload with image size (0, 0)')\n    \n        elif img_size == (1, 1):\n            response = upload_image(('small.png', b'', 'image/png'), 'Testing with (1, 1) image')\n            print('\\nAttempted upload with image size (1, 1)')\n    \n        else:\n            img = get_random_image(img_size)\n            img = (img * 255).astype(np.uint8)\n            additional_metadata = 'Random image upload'\n    \n            with tempfile.NamedTemporaryFile(suffix='.png', delete=False) as temp_image_file:\n                image_path = temp_image_file.name\n                Image.fromarray(img).save(image_path)\n    \n            with open(image_path, 'rb') as file:\n                response = upload_image(file, additional_metadata)\n    \n            print(f'\\nUpload pet image with size {img_size}')\n    \n        print('\\nUpload pet image: image size & status code')\n        print('Text: ' + response.text)\n        print('Status: ' + str(response.status_code))\n>       assert response.status_code == expected_status\nE       assert 200 == 400\nE        +  where 200 = <Response [200]>.status_code\n\nmain.py:100: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"pet_id","time":{"start":1724667930203,"stop":1724667930203,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"base_url","time":{"start":1724667930203,"stop":1724667930203,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"data","time":{"start":1724667930203,"stop":1724667930203,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"setup","time":{"start":1724667930203,"stop":1724667930425,"duration":222},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"update_pet_data","time":{"start":1724667930426,"stop":1724667930426,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false}],"testStage":{"status":"failed","statusMessage":"AssertionError: assert 200 == 400\n +  where 200 = <Response [200]>.status_code","statusTrace":"base_url = 'https://petstore.swagger.io/v2', pet_id = 123454321\nimg_size = (0, 0), expected_status = 400\n\n    @pytest.mark.parametrize(\"img_size, expected_status\", [\n        ((256, 512), 200),\n        ((512, 1024), 200),\n        ((1, 1), 200),\n        ((0, 0), 400)\n    ])\n    def test_upload_pet_image_sizes_statuses(base_url, pet_id, img_size, expected_status):\n        def upload_image(file, metadata):\n            return requests.post(\n                f'{base_url}/pet/{pet_id}/uploadImage',\n                data={'additionalMetadata': metadata},\n                files={'file': file}\n            )\n    \n        if img_size == (0, 0):\n            response = upload_image(('empty.png', b'', 'image/png'), 'Testing with (0, 0) image')\n            print('\\nAttempted upload with image size (0, 0)')\n    \n        elif img_size == (1, 1):\n            response = upload_image(('small.png', b'', 'image/png'), 'Testing with (1, 1) image')\n            print('\\nAttempted upload with image size (1, 1)')\n    \n        else:\n            img = get_random_image(img_size)\n            img = (img * 255).astype(np.uint8)\n            additional_metadata = 'Random image upload'\n    \n            with tempfile.NamedTemporaryFile(suffix='.png', delete=False) as temp_image_file:\n                image_path = temp_image_file.name\n                Image.fromarray(img).save(image_path)\n    \n            with open(image_path, 'rb') as file:\n                response = upload_image(file, additional_metadata)\n    \n            print(f'\\nUpload pet image with size {img_size}')\n    \n        print('\\nUpload pet image: image size & status code')\n        print('Text: ' + response.text)\n        print('Status: ' + str(response.status_code))\n>       assert response.status_code == expected_status\nE       assert 200 == 400\nE        +  where 200 = <Response [200]>.status_code\n\nmain.py:100: AssertionError","steps":[],"attachments":[{"uid":"22c467a6f0637761","name":"stdout","source":"22c467a6f0637761.txt","type":"text/plain","size":230}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":1,"hasContent":true},"afterStages":[{"name":"setup::0","time":{"start":1724667958395,"stop":1724667958619,"duration":224},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false}],"labels":[{"name":"suite","value":"main"},{"name":"host","value":"fv-az985-468"},{"name":"thread","value":"2130-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"main"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"expected_status","value":"400"},{"name":"img_size","value":"(0, 0)"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"tags":[]},"source":"5adfa544fbae4c94.json","parameterValues":["400","(0, 0)"]}